{% extends "fan/_fan_base.html" %}

{% block title %}Roster - {{ prefs.league_name }}{% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="mb-4">Roster</h1>

    {% if roster_data %}
        {% for division_name, data in roster_data.items() %}
            <div class="card mb-4">
                <div class="card-header">
                    <h2>{{ division_name }}</h2>
                </div>
                <div class="card-body">
                    {% if data.type == 'Singles' %}
                        {% if data.wrestlers %}
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>Name</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for wrestler in data.wrestlers %}
                                            <tr>
                                                <td>
                                                    <a href="{{ static_url_for('fan.view_wrestler', wrestler_name=wrestler.Name) }}">
                                                        {{ wrestler.Name }}
                                                        {% if prefs.fan_mode_show_records %}
                                                            {% if prefs.fan_mode_roster_record_type == 'Singles' %}
                                                                ({{ wrestler.Singles_Wins | default(0) }}-{{ wrestler.Singles_Losses | default(0) }}-{{ wrestler.Singles_Draws | default(0) }})
                                                            {% elif prefs.fan_mode_roster_record_type == 'Overall' %}
                                                                ({{ wrestler.Total_Wins | default(0) }}-{{ wrestler.Total_Losses | default(0) }}-{{ wrestler.Total_Draws | default(0) }})
                                                            {% endif %}
                                                        {% endif %}
                                                        {% if wrestler.Belt %}({{ wrestler.get('current_champion_title_display', wrestler.Belt) }}){% endif %}{% if wrestler.display_status %}{{ wrestler.display_status }}{% endif %}
                                                    </a>
                                                </td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        {% else %}
                            <p>No active wrestlers in this division.</p>
                        {% endif %}
                    {% elif data.type == 'Tag-Team' %}
                        {% if data.tagteams %}
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead>
                                        <tr>
                                            <th>Team Name</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        {% for team in data.tagteams %}
                                            <tr>
                                                <td>
                                                    <a href="{{ static_url_for('fan.view_tagteam', tagteam_name=team.Name) }}">
                                                        {{ team.Name }}
                                                        {% if prefs.fan_mode_show_records %}
                                                            ({{ team.Wins | default(0) }}-{{ team.Losses | default(0) }}-{{ team.Draws | default(0) }})
                                                        {% endif %}
                                                        {% if team.Belt %}({{ team.get('current_champion_title_display', team.Belt) }}){% endif %}{% if team.display_status %}{{ team.display_status }}{% endif %}
                                                    </a>
                                                </td>
                                            </tr>
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>
                        {% else %}
                            <p>No active tag teams in this division.</p>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
        {% endfor %}
    {% else %}
        <p>No active divisions or roster members found.</p>
    {% endif %}
</div>
{% endblock %}
